<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Kakao map start</title>
    <style>
        .hAddr {position:absolute;left:10px;top:10px;border-radius: 2px;background:#fff;background:rgba(255,255,255,80);z-index:1;padding:5px;}
    </style>
</head>
<body>
    <div id="map" style="width:560px;;height:775px;"></div>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2c94aabf2a25beec36ce54de98b63f4f&libraries=services"></script>
    <script>
        var container = document.getElementById('map'),
            options = {
                center: new kakao.maps.LatLng(126.6551209, 126.6551209),
                level: 3
            };
        var map =  new kakao.maps.Map(container, options);     
        var markers = [];
        var car_pointer = './marker.png', 
            car_pointer_size = new kakao.maps.Size(10,10),
            car_marker_image = new kakao.maps.MarkerImage(car_pointer, car_pointer_size);
        var geocoder = new kakao.maps.services.Geocoder();
        var detailAddr;


        function initMap(){
            map.panTo( new kakao.maps.LatLng(37.4505988,126.6551209) );
            marker = new kakao.maps.Marker({
                image : car_marker_image,
                position: new kakao.maps.LatLng(37.4505988,126.6551209)
            });
            marker.setMap(map);
        };

        initMap();

        var callback = function(result, status){
            if(status === kakao.maps.services.Status.OK){
                detailAddr = result[0].address.address_name;
                //detailAddr = "heeelo";
                //console.log(detailAddr(result));
            }
       };

        function addMarker(lat, lng){
            map.panTo( new kakao.maps.LatLng(lat,lng));
            marker = new kakao.maps.Marker({
                image : car_marker_image,
                position: new kakao.maps.LatLng(lat, lng)
            });
            marker.setMap(map);
            markers.push(marker);
            if(markers.length == 1 || markers.length % 50 == 0){
                geocoder.coord2Address(lng, lat, callback);
            }
        }

        function getAddr(){
            return detailAddr;
        }

        function resetMarker(){
            for(var i=0; i<markers.length; i++){
                markers[i].setMap(null);
            }
        }
       
    </script>
</body>
</html>
